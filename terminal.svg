<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 1200 120" preserveAspectRatio="none"
     width="100%" height="6vh">
  <rect width="100%" height="100%" fill="#061018"/>
  <foreignObject x="0" y="0" width="100%" height="100%">
    <style>
      .term {
        font-family: "Fira Code", monospace;
        font-size: 13px;
        line-height: 1.3;
        color: #d9f1ff;
        height: 100%;
        padding: 10px 16px;
        display: flex;
        align-items: center;
      }
      .wrapper {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
        position: relative;
      }
      .type {
        display: inline-block;
        overflow: hidden;
        white-space: nowrap;
        animation: nonstopTyping 7s steps(140, end) infinite;
      }
      .cursor {
        display: inline-block;
        width: .7ch;
        height: 1.1em;
        background: #d9f1ff;
        margin-left: 2px;
        vertical-align: bottom;
        animation: blink 0.85s steps(1, start) infinite;
      }
      @keyframes blink {
        0% { opacity: 1; }
        50% { opacity: 0; }
        100% { opacity: 1; }
      }
      @keyframes nonstopTyping {
        from { width: 0ch; }
        to   { width: 140ch; }
      }
      .user { color: #7ee787; }
      .prompt { color: #9fd3ff; margin-right: .4ch; }
      .dim { color: #6f7b83; font-size: 12px; margin-left: 8px; }
    </style>

    <div xmlns="http://www.w3.org/1999/xhtml" class="term">
      <div class="wrapper">
        <span class="user">pritam@trade</span><span class="prompt">:~$</span>
        <span class="type">
          ./bin/run_lowlatency_engine --mode live --feed eth0 --optimize true && \
          tail -n 500 /var/log/engine/trades.log | grep -E "EXECUTED|REJECT" | tee -a /tmp/execs.log ; \
          ./tools/latency_probe --pkt 100000 --out csv --iface eth0 --warmup 5 ; \
          python3 scripts/agg_orders.py --source /data/ticks --window 1000 --out /tmp/agg.csv ; \
          netstat -anp | grep 9000 ; echo "probe done" ; \
          ./bin/reload_config --path conf/prod.json && echo "reload ok" ; \
          jq -r '.price' /tmp/agg.csv | awk '{sum+=$1}END{print sum/NR}'
        </span>
        <span class="cursor"></span>
      </div>
    </div>
  </foreignObject>
</svg>
